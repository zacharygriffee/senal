var e=function(e){var t,r=e.Symbol;if("function"==typeof r)if(r.observable)t=r.observable;else{t="function"==typeof r.for?r.for("https://github.com/benlesh/symbol-observable"):r("https://github.com/benlesh/symbol-observable");try{r.observable=t}catch(e){}}else t="@@observable";return t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")());const t="senal-",r=e?.default||e,n=Symbol.for(`${t}ig`),o=Symbol.for(`${t}ra`),i=Symbol.for(`${t}in`),l=Symbol(),u=Symbol(),s=Symbol(),c=Symbol.for(`${t}tada`),a=Symbol.for(`${t}incit`),f=Symbol.for(`${t}inv`),b=Symbol.for(`${t}invr`);function p(e){const t=e?.[c];if(t)return t.paused++,y.bind({done:!1},t)}function y(e){this.done||(e.paused=Math.max(e.paused-1,0),this.done=!0)}function m(e){if("object"!=typeof e||Array.isArray(e))throw new Error("Cannot ignore passed argument");return e[n]=!0,e}function d(e){return"function"==typeof e}function g(e=1){return e instanceof Error||e?.message?h([v(e.stack)[0]])[0]:((e=Math.max(e,1))!=e&&(e=1),v((new Error).stack).slice(e).map((e=>h(e))))}function h(e){return Object.assign(e,{calleeShort:e.calleeShort||(e.callee||"").split(".")[(e.callee||"").split(".").length-1]})}function v(e){return e.split("\n").map((e=>{let t,r,n,o=[];if((r=(e=e.trim()).match(/at (.+) \(eval at .+ \((.+)\), .+\)/))||(r=e.match(/at (.+) \((.+)\)/))||"at "!==e.slice(0,3)&&(r=e.match(/(.*)@(.*)/)))t=r[1],o=(r[2].match(/(.*):(\d+):(\d+)/)||r[2].match(/(.*):(\d+)/)||[]).slice(1);else{if(!(n=e.match(/^(at\s+)*(.+):(\d+):(\d+)/)))return;o=n.slice(2)}return{file:o[0],beforeParse:e,callee:t||"",line:parseInt(o[1]||"",10)||void 0,column:parseInt(o[2]||"",10)||void 0}})).filter((e=>void 0!==e))}function O(e,t){if(e.filters?.length){let r=!0;const n=[...e.filters.flat(1/0)];for(const e of n)if(e&&"object"==typeof e){const t=Object.entries(e).filter((([,e])=>!!e?.[o]));for(let[e,r]of t)n.push(r?.[e])}else if(!1===e||!0===e){if(!(r=e))break}else if(d(e)&&!(r=!1!==r&&!!e(t)))break;return r&&n.filter((e=>"string"==typeof e)).includes(t.reason)}return!1}function w(e){return e&&(e.completed||e.errored)}const{push:j,pop:S,clear:A}=new function(e){const t=e,r=new Set,n=new Set;return{push:function(e,n=t){n&&[...r].find((t=>n(t,e)))||r.add(e)},pop:function(){let e=[...r].find((e=>!n.has(e)));return void 0!==e&&n.add(e),e},remaining:function(){return r.size-n.size},queued:r,processed:n,clear:function(){r.clear(),n.clear()}}};let P,x,_=!1;function k(e,t){if(!(w(t=t[c])||t.paused||t.inQueue||(e?.[a]||(e=N(t,"manual",e)),e=Object.freeze(e),j({observer:t,inciter:e},((e,t)=>e.observer.id===t.observer.id&&e.inciter.id===t.inciter.id)),t.inQueue=!0,_))){let e;for(_=!0;e=S();){const{observer:t,inciter:r}=e;if(O(t,r)){if(w(t)||t.paused)continue;if(w(t)||t.paused)break;x=r,P=t;try{x[b](t._next),t._next(r);for(const e of Object.getOwnPropertySymbols(P._subscriptions)){P._subscriptions[e].next(r)}}catch(e){_=!1,A(),e.inciter=r,t.error(e);break}finally{x[b](null),x=void 0,P=void 0}}t.inQueue=!1}_=!1,A()}}const E=["initial","collection","property","manual","complete","error","invocation"];function N(e,t,r={},n=3){if("string"!=typeof t)throw new Error("reason must be a string");let l,u;("object"!=typeof r||Array.isArray(r))&&(r={value:r}),"error"===t?u=g(r.error):(l=g(),u=l[n]),!u&&l&&(u=l[l.length-1]);const{callee:s,line:p,column:y,file:m,beforeParse:d}=u||{};let h,v=Symbol.for(t+"#"+d),O={...r,cause:e,reason:t,callee:s,line:p,column:y,offset:n,file:m,stack:l};return O=e?.[i]&&e?.[o]?{...O,isInvocation:!0,isSenal:!0}:e?.[o]?{...O,isSenal:!0}:e?.[c]?{...O,isTada:!0}:{...O},Object.defineProperties(O,{symbol:{enumerable:!1,configurable:!1,writable:!1,value:v},[a]:{enumerable:!1,configurable:!1,writable:!1,value:!0},[f]:{enumerable:!1,configurable:!1,writable:!1,value:e=>{!function(e,t,r){let n=P,o=x;P=e,x=t,r(),P=n,x=o}(O.cause,e,(()=>{h?.(e)}))}},[b]:{enumerable:!0,configurable:!0,writable:!0,value:e=>{h=e}}}),O}function $(e,t,r={}){if(E.includes(t))throw new Error(`Cannot use reserved reason "${t}".`);return Object.freeze(N(e,t,r,4))}function M(e,t){return e.filter(((r,n)=>e.findIndex((e=>t(r,e)))===n))}let R;R="function"==typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e);let V=[],I=[],z=new Map;function Q(e){const t=Symbol(),r=[];z.set(t,(t=>{for(const n of t)r.find((e=>e===n.symbol))||(r.push(n.symbol),e(n))})),R((()=>z.delete(t)))}function T(e){return[e?.next,e?.error,e?.complete].some(d)}function q(e,...t){(function(e){return!!d(e)||T(e)})(e)||(e=e=>null);const n=e,s={};let a,f,p,y;const m=t=>{e.next(t)};if(m.unsubscribe=h,e?.[c])e=n[c],f=e.error,p=e.complete;else{if(e={started:!1,completed:!1,errored:!1,inQueue:!1,readOnly:!1,paused:0,id:Symbol(),next:function(t){if(w(e))return y;!e.started&&O({filters:e.filters},{reason:"initial"})&&k(N(e,"initial"),e);return e.started=!0,k(t,e),y},error:function(t){if(w(e))return y;Object.values(s).forEach((e=>e.error(t))),k(N(e,"error",{error:t}),e),e.errored=!0;const r=Object.getOwnPropertySymbols(s);(f||(e=>{if(!r.length)throw e}))(t);for(const e of r)y._subscriptions[e].error(t);return y},complete:g,completeNextTick:function(){return R(g),y},addFilter:function(...t){if(w(e))return y;for(const r of t.flat(1/0))e.filters.includes(r)||e.filters.push(r);return y},subscribe:function(t={}){if(w(e))return y;let r=Symbol(),n=T(t)?t:{};if(T(t))n=t;else{for(const e of["error","complete"])n[e]=t[e]??(e=>null);n.next=t?.next||t||(e=>null)}return Object.defineProperty(y._subscriptions,r,{enumerable:!0,configurable:!0,value:n}),{tada:y,unsubscribe(){delete s[r]}}},unsubscribe:h,retro:function(t=!1){const r=function(){try{return[...M(I,((e,t)=>e.symbol===t.symbol))]}finally{V=[],I=[]}}();for(const{cause:n,property:i,type:s}of r)(t||"get"===s)&&n[o]&&(n[l](e,i),n[u](i));return y},pronto:function(t=!1){return w(e)||Q((r=>{const{cause:n,property:i,type:s}=r;(t||"get"===s)&&n[o]&&(n[l](e,i),n[u](i))})),y},intercept:function(){return w(e)||Q((t=>{const{cause:r,type:n,thisArg:l,args:u,[b]:s}=t;"invoke"===n&&r[o]&&r[i]&&(!function(e,t){P=e,x=t}(e,t),s(e._next),r[i](r,u,l,7))})),y},_subscriptions:s,*[Symbol.iterator](){const t=function(e,t=!0){const r=e[c];let n=r.readOnly;try{V=[],r.readOnly=!0;const e=N(r,"collection");return r.next(e),r.readOnly=n,t&&(V=M(V,((e,t)=>e.symbol===t.symbol))),[...V]}finally{V=[]}}(e);for(const e of t)"symbol"!=typeof e&&(yield e)}},e.filters=t.length?t.flat(1/0):["initial","invocation","property","collection","manual"],T(n)){const{next:t,error:r,complete:o,...i}=n;a=t,f=r,p=o,e={...e,...i}}else a=n;[e,n,m].forEach((t=>{Object.defineProperty(t,c,{value:e,configurable:!0,writable:!0,enumerable:!1}),Object.defineProperty(t,r,{value:()=>y,configurable:!0,writable:!0,enumerable:!1}),Object.defineProperty(t,"@@observable",{value:()=>y,configurable:!0,writable:!0,enumerable:!1})}))}return d(a)?e._next||=a:e._next||=e=>null,e.completed&&e.complete(),(!e.inQueue||e.errored||e.completed)&&O({filters:e.filters},{reason:"initial"})&&(k(N(e,"initial"),e),e.started=!0),y=new Proxy(m,{get:(t,r,n)=>Reflect.get(e,r,n),set:(t,r,n,o)=>(w(e)||(e[r]=n),!0)}),y;function g(){if(w(e))return y;Object.values(s).forEach((e=>e.complete())),k(N(e,"complete"),e),e.completed=!0,p?.();for(const e of Object.getOwnPropertySymbols(y._subscriptions))y._subscriptions[e].complete();return y}function h(){e.complete();for(const e of Object.getOwnPropertySymbols(s))delete s[e]}}const D=Object.getOwnPropertyNames(Object.getPrototypeOf({}));function C(e){return null!=e&&("object"==typeof e||"function"==typeof e)}const F=Object.getOwnPropertyNames(Object.getPrototypeOf([]));function B(e){let t=[];for(let r in e)t[+r]=e[r];return t}let G;function H(e={},t={}){const{deep:r=!0,subscribeOnSet:c=!1,startReactive:a=!0,arrayToObject:b=!1}=t;if(!C(e))throw new Error("Senals first argument must be an object");const p=e=>(Array.isArray(e)||null!=e?.length&&"object"==typeof e)&&b;if(Array.isArray(e)&&!p(e))throw new Error("Arrays are not observable unless arrayToObject = true");p(e)&&(e=function(e){const t=e.length;return{...e,length:t}}(e));const y={},m={};let d,g,h=e?.[n];try{if(e[o])return e;e[o]=!0}catch(t){return e}if(r&&!h)for(const[t,r]of Object.entries(e))if((C(r)||p(r))&&(!Array.isArray(r)||p(r)))try{const n=Object.getOwnPropertyDescriptor(e,t);(n.set||!0===n.writable)&&(e[t]=H(r))}catch(e){}function v(e,t,r="property"){if(!h&&y[e]&&(function(e){return D.includes(e)}(e)&&![void 0,!0].includes(m[e])&&(m[e]=void 0),!m[e])){m[e]=!0;for(const n of y[e])n&&(n.completed||n.errored?delete y[e]:k(N(_,r,t),n));delete m[e]}}function O(e,t,r="get",n="property",o={}){w(P)?y[t]&&delete y[t]:function(e){if(I.length=0,V.push(e),V=M(V,((e,t)=>e.symbol===t.symbol)),I=[...V,...I],z.size>0)for(let e of z.values())"function"==typeof e?e(V):e.push(...V);R((()=>{V.length=0}))}(N(e,n,{type:r,property:t,tada:P,...o}))}function j(e,t,r=P){h||!function(e,t){if(null==e[t])return!0;const r=Object.getOwnPropertyDescriptor(e,t);return"__proto__"!==t&&{}.hasOwnProperty.call(e,t)&&r.configurable&&r.enumerable}(e,t)&&!p(e[t])&&t!==i||(t!==i&&e[t]&&!Object.getOwnPropertyDescriptor(e,t)?.writable&&Object.defineProperty(e,t,{value:e[t],writable:!0,enumerable:!0,configurable:!0}),r&&(Array.isArray(y[t])||(y[t]=[]),y[t].find((e=>e.id===r.id))||y[t].push(r)))}Object.defineProperties(e,{[l]:{enumerable:!1,configurable:!1,value:(t,r)=>j(e,r,t)},[u]:{enumerable:!1,configurable:!1,writeable:!1,value:(t,r={})=>v(t,{...r,value:e[t]})},[s]:{enumerable:!1,configurable:!1,writeable:!1,value:(t,r)=>O(e,t,r)},[i]:{enumerable:!1,configurable:!1,writeable:!1,value:"function"==typeof e&&A},id:{enumerable:!1,configurable:!1,writable:!1,value:Symbol()}});let S=!1;function A(e,t,r,n=3){function o(e,t){for(let r=0;r<Math.max(t.length,e.length);r++)void 0===t[r]&&(t[r]=e[r]);return t}w(P)||x[f](N(e,"invocation",{accept:(...e)=>{g.args=o(t,e),g.thisArg=r},instead:(e,...n)=>{g.args=o(t,n),g.thisArg=r,g.target=e},shim:e=>{g.returnValue=e},args:t,thisArg:r,isInvocation:!0,property:G},n))}e[i]&&(d=Symbol(),g={target:d,returnValue:d,args:d,thisArg:d});const _=new Proxy(e,{...e[i]?{apply(e,t,r){if(j(e,i),e?.name&&(G=e.name),!P?.readOnly){if(O(e,i,"invoke","invocation",{thisArg:t,args:r}),P&&!S)S=!0,A(e,r,t),S=!1;else if(S&&x?.isInvocation)return;if(Object.values(g).some((e=>e!==d)))try{let{returnValue:n,args:o,thisArg:i,target:l}=g;return n!==d?n:(o=o===d?r:o,i=i===d?t:i,l=l===d?e:l,Reflect.apply(l,i,o))}finally{g.returnValue=d,g.thisArg=d,g.args=d}return Reflect.apply(e,t,r)}O(e,G,"invoke","invocation",{thisArg:t,args:r})}}:{},get(t,r,o){if("function"==typeof t[r]&&(G=r),r===n)return h;if(r===Symbol.iterator&&p(e)){const i=B(e);return function*(){for(let e of i)null!=e&&(yield e)}}if("symbol"!=typeof r)if(p(e)){if("length"===r)j(t,r),O(t,r,"get");else{if(F.includes(r)){let s=B(t);const c=s.length;return(...e)=>{let n=s[r](...e);Array.isArray(n)&&(s=n);for(let e=0;e<Math.max(s.length,t.length);e++)if(t[e]!==s[e])if(null!=s[e]){const r=t[e];t[e]=s[e],v(e,{value:t[e],prevValue:r,property:e}),O(t,e,"set")}else delete t[e];return t.length=Array.isArray(n)?n.length:Number(n)==Number(n)&&n>=0?n:null,u(c,t.length),n}}Number(r)==Number(r)&&l()}if(null!=t[r])return Reflect.get(t,r,o);function l(){for(let e=0;e<+r;e++)y[e]||j(t,e);const e=t.length,n=+(Object.keys(t).filter((e=>"length"!==e&&Number(e)==Number(e))).sort(((e,t)=>+e==+t)).reverse()[0]||0);u(e,0===n?0:n+1)}function u(e,r){t.length=r,v("length",{value:r,prevValue:e,property:"length"}),O(t,"length","set")}}else j(t,r),O(t,r,"get");return Reflect.get(t,r,o)},set(e,t,o,i){let l=e[t];return t===n?(h=o,!0):(r&&(C(o)||p(o))&&(Array.isArray(o)&&!p(o)||(o=H(o))),c&&j(e,t),(P&&!P.readOnly||!P)&&Reflect.set(e,t,o,i),v(t,{value:o,prevValue:l,property:t}),O(e,t,"set"),!0)}});return _}export{m as ignore,$ as inciter,p as pause,H as senal,q as tada};
