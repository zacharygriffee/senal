const e="senal-",r=Symbol.for(`${e}ig`),t=Symbol.for(`${e}ra`),n=Symbol.for(`${e}tada`),o=Symbol.for(`${e}incit`);function i(e){const r=e?.[n];if(r)return r.paused++,u.bind({done:!1},r)}function u(e){this.done||(e.paused=Math.max(e.paused-1,0),this.done=!0)}function c(e){if("object"!=typeof e||Array.isArray(e))throw new Error("Cannot ignore passed argument");return e[r]=!0,e}function a(e){return"function"==typeof e}const f=["initial","collection","property","manual","complete","error"];function s(e,r,i={}){if("string"!=typeof r)throw new Error("reason must be a string");("object"!=typeof i||Array.isArray(i))&&(i={value:i});let u={...i,cause:e,reason:r};return u=e?.[t]?{...u,isObserve:!0,method:"observe"}:e?.[n]?{...u,isCompute:!0,method:"compute"}:{...u,method:"unknown"},Object.defineProperty(u,o,{enumerable:!1,configurable:!1,writable:!1,value:!0}),u}function l(e,r,t={}){if(f.includes(r))throw new Error(`Cannot use reserved reason "${r}".`);return Object.freeze(s(e,r,t))}let p;function d(e,r){let t=!e.filters?.length;if(!t)for(const n of e.filters)if("string"!=typeof n||r.reason!==n||!1!==t){if(!1===n||!0===n){if(!(t=n))break;if(a(n)&&!(t=!1!==t&&!!n(r)))break}}else t=!0;return t}const{push:y,pop:b,clear:m}=new function(e){const r=e,t=new Set,n=new Set;return{push:function(e,n=r){n&&[...t].find((r=>n(r,e)))||t.add(e)},pop:function(){let e=[...t].find((e=>!n.has(e)));return void 0!==e&&n.add(e),e},remaining:function(){return t.size-n.size},queued:t,processed:n,clear:function(){t.clear(),n.clear()}}};let w,g=!1;function h(e,r){if((e=e[n]).canCompute&&!e.inQueue&&(y(e,((e,r)=>e.id===r.id)),e.inQueue=!0,r?.[o]||(r=s(e,"manual",r)),!g)){let e;for(g=!0;e=b();)if(e.canCompute){if(d(e,r)){w=e;try{(e._next||e.next)(r)}catch(t){t.instigator=r,e.error(t)}w=void 0}e.inQueue=!1}g=!1,m()}}function O(e){return[e?.next,e?.error,e?.complete].some(a)}function v(e,...r){if(!function(e){return!!a(e)||O(e)}(e))throw new Error("Computed function should be an observer or function.");if(e[n]?.disposed)return;const t=e;let o,i,u;const c=r=>{e.next(r)};if(c.unsubscribe=function(){e.complete()},e?.[n])e=t[n],i=e.error,u=e.complete;else{if(e={started:!1,completed:!1,errored:!1,inQueue:!1,readOnly:!1,paused:0,id:Symbol(),get canCompute(){return!function(e){return e.completed||e.errored}(e)&&!e.paused},next:function(t){!e.started&&r?.flat().includes("initial")&&(h(e,s(e,"initial")),e.started=!0);h(e,t)},error:function(r){if(!e.canCompute)return;h(e,s(e,"error",{error:r})),e.errored=!0,(i||(e=>{throw e}))(r)},complete:function(){if(!e.canCompute)return;h(e,s(e,"complete")),e.completed=!0,u?.()},*[Symbol.iterator](){const r=function(e){const r=e[n];let t=r.readOnly;try{p=[],r.readOnly=!0;const e=s(r,"collection");return r.next(e),r.readOnly=t,[...p]}finally{p=[]}}(e);for(const e of r)"symbol"!=typeof e&&(yield e)}},e.filters=r.length?r.flat():["initial","property","collection","manual"],O(t)){const{next:r,error:n,complete:c,...a}=t;o=r,i=n,u=c,e={...e,...a}}else o=t;[e,t,c].forEach((r=>{Object.defineProperty(r,n,{value:e,configurable:!0,writable:!0,enumerable:!1})}))}return a(o)&&(e._next||=o),e.completed&&e.complete(),(!e.inQueue||e.errored||e.completed)&&(h(e,s(e,"initial")),e.started=!0),Object.assign(c,e),c}function j(e){let r=!1,t=e||w;if(t?.[n]){if(t[n].disposed)return e;t[n].complete()}else r=!0;if("function"!=typeof t&&"object"!=typeof t)throw new Error("Computed must be an observer or function.");return r&&(e[n]={disposed:!0}),e}const A=Object.getOwnPropertyNames(Object.getPrototypeOf({}));function x(e){return null!=e&&("object"==typeof e||"function"==typeof e)}function P(e={},n={}){const{deep:o=!0,subscribeOnSet:i=!1,startReactive:u=!0,arrayToObject:c=!1}=n;if(!x(e))throw new Error("Observe first argument must be an object");if(Array.isArray(e)&&!c)throw new Error("Arrays are not observable unless arrayToObject = true");if(Array.isArray(e)&&c){const r=e.length;e={...e,length:r}}const a={},f={};let l=e?.[r];const d=+o|2*+i|4*+u|8*+c||16;if((e[t]||{})[d])return e;if(e[t]||("function"==typeof e?e[t]={}:Object.defineProperty(e,t,{value:{},enumerable:!1,configurable:!0,writable:!0})),e[t][d]||Object.defineProperty(e[t],""+d,{value:1}),o&&!l)for(const[r,t]of Object.entries(e))x(t)&&(Array.isArray(t)||(e[r]=P(t)));function y(e,r){if(!l&&a[e]&&(function(e){return A.includes(e)}(e)&&![void 0,!0].includes(f[e])&&(f[e]=void 0),!f[e])){f[e]=!0;for(const t of a[e])t&&(t.completed||t.errored?delete a[e]:h(t,s(g,"property",r)));delete f[e]}}function b(e,r,t="get"){var n;w&&(n=s(e,"property",{type:t,property:r,computed:w}),Array.isArray(p)&&p.push(n))}function m(e,r){!l&&function(e,r){if(null==e[r])return!0;const t=Object.getOwnPropertyDescriptor(e,r);return"__proto__"!==r&&{}.hasOwnProperty.call(e,r)&&t.configurable&&t.enumerable}(e,r)&&(Object.getOwnPropertyDescriptor(e,r)?.writable||Object.defineProperty(e,r,{value:e[r],writable:!0,enumerable:!0,configurable:!0}),w&&(Array.isArray(a[r])||(a[r]=[]),a[r].find((e=>e.id===w.id))||a[r].push(w)))}const g=new Proxy(e,{get:(e,t,n)=>t===r?l:(m(e,t),b(e,t,"get"),Reflect.get(e,t,n)),set(e,n,u,c){let a=e[n];return n===r?(l=u,!0):(n===t||(o&&x(u)&&(Array.isArray(u)||(u=P(u))),i&&m(e,n),(w&&!w.readOnly||!w)&&Reflect.set(e,n,u,c),y(n,{value:u,prevValue:a}),b(e,n,"set")),!0)}});return g}function C(e={},r={}){return P(e,{...r,deep:!1})}export{j as dispose,c as ignore,l as inciter,i as pause,C as senal,P as senals,v as tada};
