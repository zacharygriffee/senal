const e="senal-",r=Symbol.for(`${e}ig`),t=Symbol.for(`${e}ra`),n=Symbol.for(`${e}tada`),o=Symbol.for(`${e}incit`);function i(e){const r=e?.[n];if(r)return r.paused++,u.bind({done:!1},r)}function u(e){this.done||(e.paused=Math.max(e.paused-1,0),this.done=!0)}function c(e){if("object"!=typeof e||Array.isArray(e))throw new Error("Cannot ignore passed argument");return e[r]=!0,e}function f(e){return"function"==typeof e}const l=["initial","collection","property","manual","complete","error"];function a(e,r,i={}){if("string"!=typeof r)throw new Error("reason must be a string");("object"!=typeof i||Array.isArray(i))&&(i={value:i});let u={...i,cause:e,reason:r};return u=e?.[t]?{...u,isSenal:!0}:e?.[n]?{...u,isTada:!0}:{...u},Object.defineProperty(u,o,{enumerable:!1,configurable:!1,writable:!1,value:!0}),u}function s(e,r,t={}){if(l.includes(r))throw new Error(`Cannot use reserved reason "${r}".`);return Object.freeze(a(e,r,t))}let d;function p(e,r){let t=!e.filters?.length;if(!t)for(const n of e.filters)if("string"==typeof n&&r.reason===n&&!1===t)t=!0;else if(!1===n||!0===n){if(!(t=n))break}else if(f(n)&&!(t=!1!==t&&!!n(r)))break;return t}function y(e){return e.completed||e.errored}const{push:b,pop:m,clear:w}=new function(e){const r=e,t=new Set,n=new Set;return{push:function(e,n=r){n&&[...t].find((r=>n(r,e)))||t.add(e)},pop:function(){let e=[...t].find((e=>!n.has(e)));return void 0!==e&&n.add(e),e},remaining:function(){return t.size-n.size},queued:t,processed:n,clear:function(){t.clear(),n.clear()}}};let g,h=!1;function O(e,r){if(!(y(e=e[n])||e.paused||e.inQueue||(b(e,((e,r)=>e.id===r.id)),e.inQueue=!0,r?.[o]||(r=a(e,"manual",r)),r=Object.freeze(r),h))){let e;for(h=!0;e=m();)if(!y(e)&&!e.paused){if(p(e,r)){g=e;try{(e._next||e.next)(r)}catch(t){t.instigator=r,e.error(t)}g=void 0}e.inQueue=!1}h=!1,w()}}function j(e){return[e?.next,e?.error,e?.complete].some(f)}function v(e,...r){if(!function(e){return!!f(e)||j(e)}(e))throw new Error("Computed function should be an observer or function.");if(e[n]?.disposed)return;const t=e;let o,i,u;const c=r=>{e.next(r)};if(c.unsubscribe=function(){e.complete()},e?.[n])e=t[n],i=e.error,u=e.complete;else{if(e={started:!1,completed:!1,errored:!1,inQueue:!1,readOnly:!1,paused:0,id:Symbol(),next:function(r){if(y(e))return e;!e.started&&p({filters:e.filters},{reason:"initial"})&&(O(e,a(e,"initial")),e.started=!0);return O(e,r),e},error:function(r){return y(e)||(O(e,a(e,"error",{error:r})),e.errored=!0,(i||(e=>{throw e}))(r)),e},complete:function(){return y(e)||(O(e,a(e,"complete")),e.completed=!0,u?.()),e},addFilter:function(...r){if(y(e))return e;for(const t of r.flat())e.filters.includes(t)||e.filters.push(t);return e},*[Symbol.iterator](){const r=function(e){const r=e[n];let t=r.readOnly;try{d=[],r.readOnly=!0;const e=a(r,"collection");return r.next(e),r.readOnly=t,[...d]}finally{d=[]}}(e);for(const e of r)"symbol"!=typeof e&&(yield e)}},e.filters=r.length?r.flat():["initial","property","collection","manual"],j(t)){const{next:r,error:n,complete:c,...f}=t;o=r,i=n,u=c,e={...e,...f}}else o=t;[e,t,c].forEach((r=>{Object.defineProperty(r,n,{value:e,configurable:!0,writable:!0,enumerable:!1})}))}return f(o)&&(e._next||=o),e.completed&&e.complete(),(!e.inQueue||e.errored||e.completed)&&p({filters:r},{reason:"initial"})&&(O(e,a(e,"initial")),e.started=!0),new Proxy(c,{get(r,t,n){if(e[t])return Reflect.get(e,t,n)},set:(r,t,n,o)=>!!y(e)||(e[t]?Reflect.set(e,t,n,o):void 0)})}function A(e){let r=!1,t=e||g;if(t?.[n]){if(t[n].disposed)return e;t[n].complete()}else r=!0;if("function"!=typeof t&&"object"!=typeof t)throw new Error("Computed must be an observer or function.");return r&&(e[n]={disposed:!0}),e}const x=Object.getOwnPropertyNames(Object.getPrototypeOf({}));function P(e){return null!=e&&("object"==typeof e||"function"==typeof e)}function S(e={},n={}){const{deep:o=!0,subscribeOnSet:i=!1,startReactive:u=!0,arrayToObject:c=!1}=n;if(!P(e))throw new Error("Senals first argument must be an object");if(Array.isArray(e)&&!c)throw new Error("Arrays are not observable unless arrayToObject = true");if(Array.isArray(e)&&c){const r=e.length;e={...e,length:r}}const f={},l={};let s=e?.[r];const p=+o|2*+i|4*+u|8*+c||16;if((e[t]||{})[p])return e;if(e[t]||("function"==typeof e?e[t]={}:Object.defineProperty(e,t,{value:{},enumerable:!1,configurable:!0,writable:!0})),e[t][p]||Object.defineProperty(e[t],""+p,{value:1}),o&&!s)for(const[r,t]of Object.entries(e))P(t)&&(Array.isArray(t)||(e[r]=S(t)));function y(e,r){if(!s&&f[e]&&(function(e){return x.includes(e)}(e)&&![void 0,!0].includes(l[e])&&(l[e]=void 0),!l[e])){l[e]=!0;for(const t of f[e])t&&(t.completed||t.errored?delete f[e]:O(t,a(w,"property",r)));delete l[e]}}function b(e,r,t="get"){g&&function(e){Array.isArray(d)&&d.push(e)}(a(e,"property",{type:t,property:r,tada:g}))}function m(e,r){!s&&function(e,r){if(null==e[r])return!0;const t=Object.getOwnPropertyDescriptor(e,r);return"__proto__"!==r&&{}.hasOwnProperty.call(e,r)&&t.configurable&&t.enumerable}(e,r)&&(Object.getOwnPropertyDescriptor(e,r)?.writable||Object.defineProperty(e,r,{value:e[r],writable:!0,enumerable:!0,configurable:!0}),g&&(Array.isArray(f[r])||(f[r]=[]),f[r].find((e=>e.id===g.id))||f[r].push(g)))}const w=new Proxy(e,{get:(e,t,n)=>t===r?s:(m(e,t),b(e,t,"get"),Reflect.get(e,t,n)),set(e,n,u,c){let f=e[n];return n===r?(s=u,!0):(n===t||(o&&P(u)&&(Array.isArray(u)||(u=S(u))),i&&m(e,n),(g&&!g.readOnly||!g)&&Reflect.set(e,n,u,c),y(n,{value:u,prevValue:f}),b(e,n,"set")),!0)}});return w}export{A as dispose,c as ignore,s as inciter,i as pause,S as senal,v as tada};
